# Pre-Market Monitoring Configuration
# Update this file with your active positions for morning gap alerts

# Your current positions
# Add/remove positions as you enter/exit trades
# IMPORTANT: Keep this updated manually or it will alert on old positions!
positions:
  # Example position (remove when you don't have ETN)
  # ETN:
  #   shares: 20
  #   avg_entry: 341.485
  #   stop_loss: 340.00
  #   target1: 365.00
  #   target2: 380.00
  #   notes: "Paper trading - learning stop losses"
  
  # Add your real positions here:
  # AAPL:
  #   shares: 10
  #   avg_entry: 230.00
  #   stop_loss: 225.00
  #   target1: 240.00
  #   target2: 250.00
  #   notes: "Swing trade from Nov 18"
  
  # MSFT:
  #   shares: 5
  #   avg_entry: 420.00
  #   stop_loss: 410.00
  #   target1: 440.00
  #   notes: "Long-term hold"

# Alert thresholds
alerts:
  # Minimum gap percentage to trigger alert (0.5 = 0.5%)
  gap_threshold: 0.5
  
  # Alert if price is within this % of stop loss (1.0 = 1%)
  stop_proximity_threshold: 1.0
  
  # Critical alert if gap > this % (2.0 = 2%)
  critical_gap_threshold: 2.0
  
  # Include pre-market volume in alerts
  show_volume: true

# Monitoring schedule (all times in ET)
schedule:
  # Morning alert times (before market open at 9:30 AM)
  morning_alerts:
    - "07:00"  # Early warning (2.5 hours before open)
    - "08:00"  # Mid-check (1.5 hours before open)
    - "09:00"  # Final warning (30 min before open)
  
  # Enable alerts on these days
  active_days: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']

# Telegram notification settings
telegram:
  # Send alerts (uses env vars: TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID)
  send_alerts: true
  
  # Only send if you have positions (skip if positions: {} is empty)
  send_if_no_positions: false
  
  # Include market futures sentiment in alerts
  include_market_sentiment: true
  
  # Include sector rotation info
  include_sector_data: false
  
  # Include VIX (volatility index)
  include_vix: true
  
  # Include actionable recommendations
  include_recommendations: true
  
  # Include gap opportunities (NEW FEATURE!)
  include_opportunities: true
  
  # Alert priority levels to send (filter out LOW if you want)
  alert_levels: ['CRITICAL', 'HIGH', 'MEDIUM', 'LOW']

# Gap Opportunity Scanner (NEW!)
opportunity_scanner:
  # Enable opportunity scanning (finds new BUY opportunities)
  enabled: true
  
  # Minimum gap percentage to consider (2.0 = 2%)
  min_gap_pct: 2.0
  
  # Maximum opportunities to show in alert
  max_opportunities: 5
  
  # Symbols to scan (leave empty to use S&P 500 list)
  # If empty, will try to load from data/metadata/sp500_symbols.json
  # Fallback: ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'NVDA', 'TSLA', 'META', 'NFLX']
  symbols_to_scan: []
  
  # Scan for these types (both recommended)
  scan_gap_downs: true   # Oversold opportunities
  scan_gap_ups: true     # Breakout opportunities
  
  # Minimum score to show (0-100, recommended: 50)
  min_score: 50

# Data sources and caching
data:
  # Use yfinance for price data
  use_yfinance: true
  
  # Cache prices for this many minutes (avoid rate limits)
  cache_duration_minutes: 5
  
  # Retry failed requests this many times
  max_retries: 3
  
  # Fallback to regular market data if pre-market unavailable
  fallback_to_regular: true

# Advanced features
features:
  # Detect gap types (common, breakaway, runaway, exhaustion)
  gap_classification: true
  
  # Calculate potential loss if stopped out
  calculate_potential_loss: true
  
  # Suggest actions (HOLD, WATCH, PREPARE_TO_EXIT, EXIT_NOW)
  action_suggestions: true
  
  # Track gap fill probability (coming soon)
  gap_fill_tracking: false

# Notification preferences
notifications:
  # Always notify for these risk levels
  always_notify:
    - 'CRITICAL'
    - 'HIGH'
  
  # Sound/vibration on mobile (if Telegram supports)
  high_priority_for_critical: true
  
  # Include emojis in messages (makes it easier to scan)
  use_emojis: true
  
  # Format for messages: 'detailed' or 'compact'
  message_format: 'detailed'

# Debugging and testing
debug:
  # Print debug info to console
  verbose: false
  
  # Save alerts to file for review
  save_alerts_to_file: false
  
  # File path for saved alerts
  alerts_log_path: 'logs/premarket_alerts.json'

